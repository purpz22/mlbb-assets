<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#09090b">
    <title>MLBB Guess Hero</title>
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://pagead2.googlesyndication.com https://www.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' data: https: http:; connect-src 'self' https://firestore.googleapis.com https://*.firebasedatabase.app https://api.isan.eu.org https://corsproxy.io wss://*.firebaseio.com https://identitytoolkit.googleapis.com;">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5350189369134605" crossorigin="anonymous"></script>

    <style>
        :root {
            --safe-area-inset-top: env(safe-area-inset-top, 0px);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: #09090b; /* Tailwind zinc-950 */
            color: #f4f4f5; /* Tailwind zinc-50 */
            overscroll-behavior-y: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            height: 100dvh; 
            margin: 0;
            overflow: hidden;
            padding-top: var(--safe-area-inset-top);
            padding-bottom: var(--safe-area-inset-bottom);
        }

        /* Hardware acceleration utilities */
        .gpu-accel {
            transform: translateZ(0);
            will-change: transform, opacity;
        }

        /* Hide number input arrows */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center relative w-full h-full">

    <!-- LOGIN SCREEN -->
    <div id="screen-login" class="w-full max-w-sm px-6 flex flex-col items-center justify-center z-10 w-full h-full gpu-accel">
        
        <div class="mb-10 text-center">
            <h1 class="text-5xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-br from-yellow-300 via-yellow-500 to-amber-600 drop-shadow-lg leading-tight">
                GUESS<br>THE HERO
            </h1>
            <p class="text-zinc-500 font-bold tracking-widest text-sm mt-2">MLBB EDITION</p>
        </div>

        <form id="form-login" class="w-full flex flex-col gap-4">
            <div class="flex gap-3 w-full">
                <input type="number" id="login-id" placeholder="Game ID" class="flex-1 h-14 bg-zinc-900 border border-zinc-800 rounded-2xl px-4 text-xl text-center font-bold text-white placeholder-zinc-600 focus:outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 transition-all shadow-inner" required>
                <input type="number" id="login-zone" placeholder="Zone" class="w-24 h-14 bg-zinc-900 border border-zinc-800 rounded-2xl px-2 text-xl text-center font-bold text-white placeholder-zinc-600 focus:outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 transition-all shadow-inner" required>
            </div>
            
            <p id="login-msg" class="text-red-400 text-sm h-5 font-bold text-center tracking-wide"></p>
            
            <button type="submit" id="btn-login" class="w-full h-14 mt-2 bg-gradient-to-r from-yellow-500 to-amber-600 text-zinc-950 font-black text-xl rounded-2xl shadow-[0_8px_16px_-6px_rgba(245,158,11,0.5)] active:scale-[0.97] active:shadow-none transition-all duration-150 flex items-center justify-center uppercase tracking-widest">
                CONNECT
            </button>
        </form>
    </div>

    <!-- GAME SCREEN -->
    <div id="screen-game" class="w-full max-w-sm h-full px-5 py-6 flex flex-col z-10 hidden relative gpu-accel">
        
        <!-- Header / Stats -->
        <div class="flex justify-between items-center bg-zinc-900/80 border border-zinc-800/80 rounded-3xl p-4 shadow-lg backdrop-blur-md mb-6 shrink-0 mt-2">
            <div class="flex flex-col">
                <span class="text-[10px] text-zinc-500 font-black tracking-widest uppercase mb-0.5">Player</span>
                <span id="player-ign" class="font-bold text-blue-400 text-lg leading-none truncate max-w-[140px]">Name</span>
            </div>
            <div class="flex flex-col items-end">
                <span class="text-[10px] text-zinc-500 font-black tracking-widest uppercase mb-0.5">Score</span>
                <span id="player-score" class="font-black text-3xl text-yellow-400 leading-none drop-shadow-md">0</span>
            </div>
        </div>

        <!-- Game Area -->
        <div class="flex-1 flex flex-col items-center justify-center relative w-full pb-4">
            
            <!-- Timer Setup -->
            <div class="w-full flex justify-between items-end mb-3 px-1">
                <span class="text-[11px] font-black text-zinc-600 tracking-widest uppercase">Time Left</span>
                <span id="timer-text" class="text-zinc-100 font-black text-lg leading-none">15s</span>
            </div>
            
            <div class="w-full h-2.5 bg-zinc-900 border border-zinc-800 rounded-full overflow-hidden mb-8 shadow-inner relative gpu-accel">
                <div id="timer-bar" class="h-full bg-green-500 rounded-full origin-left w-full shadow-[0_0_10px_rgba(74,222,128,0.5)]"></div>
            </div>
            
            <!-- Hero Image Showcase -->
            <div class="relative w-56 h-56 flex items-center justify-center mb-8 isolate shrink-0">
                <!-- Ambient Glow -->
                <div class="absolute inset-0 bg-amber-500/20 rounded-full blur-3xl -z-10 animate-pulse"></div>
                
                <!-- Circular Container strictly enforcing rules -->
                <div class="hero-box w-full h-full rounded-full border-4 border-zinc-800 bg-zinc-950 shadow-[0_10px_40px_rgba(0,0,0,0.8)] overflow-hidden relative flex items-center justify-center" id="hero-box">
                    <img id="hero-img" src="" alt="Hero" class="w-[105%] h-[105%] object-cover block">
                    <div id="debug-msg" class="absolute inset-0 flex items-center justify-center bg-zinc-900/90 text-red-500 text-xs font-bold text-center px-4 break-words hidden z-20"></div>
                </div>
            </div>
            
            <!-- Feedback Text handled by JS but pre-styled wrapper area -->
            <p id="feedback" class="text-center font-bold text-lg h-6 mb-4 text-green-400 tracking-wide"></p>
        </div>

        <!-- Input & Controls -->
        <div class="w-full shrink-0 flex flex-col gap-3 pb-2">
            <form id="form-guess" class="flex flex-col gap-3 w-full">
                <input type="text" id="guess-input" placeholder="HERO NAME" class="w-full h-14 bg-zinc-900 border-2 border-zinc-800 rounded-2xl px-6 text-2xl text-center font-black text-white placeholder-zinc-700 uppercase tracking-widest focus:outline-none focus:border-blue-500 focus:bg-zinc-800 transition-colors shadow-inner" autocomplete="off" autocorrect="off" spellcheck="false">
                <button type="submit" id="btn-submit" class="w-full h-14 bg-blue-600 text-white font-black text-xl rounded-2xl uppercase tracking-widest shadow-[0_8px_20px_-6px_rgba(37,99,235,0.5)] active:scale-[0.97] active:shadow-none transition-all duration-150 flex items-center justify-center">
                    SUBMIT
                </button>
            </form>

            <button id="btn-show-leaderboard" class="h-12 w-full flex items-center justify-center text-[13px] text-zinc-500 font-bold uppercase tracking-widest active:text-zinc-300 transition-colors mt-2">
                View Leaderboard
            </button>
        </div>
    </div>

    <!-- LEADERBOARD SCREEN -->
    <div id="screen-leaderboard" class="fixed inset-0 bg-zinc-950 z-50 hidden flex-col gpu-accel">
        <div class="flex-1 w-full max-w-sm mx-auto flex flex-col h-full px-5 py-6">
            
            <!-- Header -->
            <div class="flex justify-between items-center mb-6 pt-2">
                <h2 class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500 italic tracking-tight">TOP PLAYERS</h2>
                <button id="btn-close-leaderboard" class="h-10 px-4 bg-zinc-900 border border-zinc-800 rounded-full flex items-center justify-center text-xs text-zinc-400 font-bold uppercase tracking-wider active:bg-zinc-800 transition-colors">
                    Close âœ•
                </button>
            </div>

            <!-- Table Area -->
            <div class="flex-1 bg-zinc-900 border border-zinc-800 rounded-3xl overflow-y-auto overscroll-contain shadow-xl mb-6 flex flex-col relative">
                <table class="w-full text-left text-sm border-collapse">
                    <tbody id="lb-body" class="px-4 block w-full">
                        <!-- JS injects here -->
                        <tr class="w-full flex"><td class="text-center text-zinc-500 py-8 font-bold w-full">Loading...</td></tr>
                    </tbody>
                </table>
                <!-- Fading edge for scroll -->
                <div class="absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-t from-zinc-900 to-transparent pointer-events-none rounded-b-3xl"></div>
            </div>

            <!-- Search Area -->
            <div class="shrink-0 bg-zinc-900/50 p-4 rounded-3xl border border-zinc-800/50">
                <p class="text-[10px] text-zinc-500 font-black uppercase tracking-widest mb-3 ml-1">Search Rank</p>
                <form id="form-search" class="flex gap-2">
                    <input type="number" id="search-id" placeholder="Game ID" class="flex-1 h-12 bg-zinc-950 border border-zinc-800 rounded-2xl px-4 text-center font-bold text-white placeholder-zinc-700 focus:outline-none focus:border-blue-500 transition-colors shadow-inner" required>
                    <button type="submit" class="h-12 px-6 bg-zinc-800 text-white font-bold text-sm uppercase tracking-wider rounded-2xl active:bg-zinc-700 transition-colors">
                        Search
                    </button>
                </form>
                
                <div id="search-result" class="mt-4 bg-blue-950/20 border border-blue-900/40 rounded-2xl p-4 hidden flex-col items-center justify-center transition-all">
                    <p id="search-rank" class="text-4xl font-black text-blue-400 drop-shadow-sm leading-none">#0</p>
                    <p id="search-details" class="text-sm font-bold text-zinc-300 mt-2 tracking-wide">IGN - 0 pts</p>
                </div>
            </div>

        </div>
    </div>

    <!-- APP LOGIC -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc, collection, query, orderBy, getDocs, limit } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCPSU7YrNL0M9j0EFUBRHDoufpW9bQlUsI",
            authDomain: "guesshero-e1180.firebaseapp.com",
            databaseURL: "https://guesshero-e1180-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "guesshero-e1180",
            storageBucket: "guesshero-e1180.firebasestorage.app",
            messagingSenderId: "274899168100",
            appId: "1:274899168100:web:da9798cf93110516d8e871"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Data Generation Logic
        const uniqueHeroNames = new Set([
            "Lunox", "Luo Yi", "Zhuxin", "Chip", "Cici", "Nolan", "Arlott", "Novaria", "Joy", "Fredrinn", 
            "Julian", "Xavier", "Melissa", "Yin", "Floryn", "Edith", "Valentina", "Aamon", "Aulus", "Natan", 
            "Phoveus", "Beatrix", "Gloo", "Paquito", "Mathilda", "Yve", "Brody", "Barats", "Khaleed", "Benedetta", 
            "Atlas", "Carmilla", "Cecilion", "Silvanna", "Wanwan", "Masha", "Baxia", "Ling", "X.borg", "Terizla", 
            "Esmeralda", "Guinevere", "Granger", "Khufra", "Badang", "Faramis", "Kadita", "Minotaur", "Hanzo", 
            "Claude", "Aldous", "Selena", "Kaja", "Chang'e", "Thamuz", "Kimmy", "Belerick", "Leomord", "Vale", 
            "Hanabi", "Uranus", "Martis", "Valir", "Gusion", "Angela", "Jawhead", "Lesley", "Pharsa", "Helcurt", 
            "Zhask", "Hylos", "Diggie", "Lancelot", "Odette", "Argus", "Grock", "Irithel", "Harley", "Gatotkaca", 
            "Roger", "Vexana", "Lapu-Lapu", "Aurora", "Hilda", "Estes", "Cyclops", "Johnson", "Moskov", 
            "Yi Sun shin", "Ruby", "Alpha", "Sun", "Chou", "Kagura", "Natalia", "Gord", "Freya", "Hayabusa", 
            "Lolita", "Layla", "Zilong", "Eudora", "Rafaela", "Clint", "Bruno", "Bane", "Franco", "Akai", "Karina", 
            "Alucard", "Miya", "Saber", "Balmond", "Nana", "Alice", "Zetian", "Sora", "Obsedia"
        ]);

        const predefinedSeriesSkins = [
            { name: "Chou", icon_path: "icons/chou-kof1.png" },
            { name: "Gusion", icon_path: "icons/gusion-KOF2.png" },
            { name: "Guinevere", icon_path: "icons/guinevere-kof1.png" },
            { name: "Karina", icon_path: "icons/karina-kof1.png" }
        ];

        const heroes = [];
        const normalizeName = (name) => name.toLowerCase().replace(/[' .]/g, '-').replace(/\.+$/, '');

        uniqueHeroNames.forEach(heroName => {
            if (heroName === "Fanny") return;
            const baseName = normalizeName(heroName);
            heroes.push({ name: heroName, icon_path: `icons/${baseName}-ss.webp` });
            heroes.push({ name: heroName, icon_path: `icons/${baseName}-1st.png` });
            heroes.push({ name: heroName, icon_path: `icons/${baseName}-icon.webp` });
        });
        predefinedSeriesSkins.forEach(skin => heroes.push({ name: skin.name, icon_path: skin.icon_path }));

        // Game State
        let currentUser = { id: "", ign: "", score: 0 };
        let currentHero = null;
        let timerInterval = null;
        let isGameActive = false;
        const MAX_TIME = 15;

        // DOM Elements Mapping
        const els = {
            screenLogin: document.getElementById('screen-login'),
            screenGame: document.getElementById('screen-game'),
            screenLeaderboard: document.getElementById('screen-leaderboard'),
            loginMsg: document.getElementById('login-msg'),
            playerIgn: document.getElementById('player-ign'),
            playerScore: document.getElementById('player-score'),
            timerText: document.getElementById('timer-text'),
            timerBar: document.getElementById('timer-bar'),
            heroImg: document.getElementById('hero-img'),
            debugMsg: document.getElementById('debug-msg'),
            feedback: document.getElementById('feedback'),
            guessInput: document.getElementById('guess-input'),
            btnSubmit: document.getElementById('btn-submit')
        };

        // Event Listeners Initialization
        document.getElementById('form-login').addEventListener('submit', handleLogin);
        document.getElementById('form-guess').addEventListener('submit', checkGuess);
        document.getElementById('btn-show-leaderboard').addEventListener('click', openLeaderboard);
        document.getElementById('btn-close-leaderboard').addEventListener('click', closeLeaderboard);
        document.getElementById('form-search').addEventListener('submit', searchPlayer);
        els.heroImg.addEventListener('error', handleImageError);

        // Android Hardware Back Button Handling (History API Hook)
        window.addEventListener('popstate', (event) => {
            if (els.screenLeaderboard.classList.contains('hidden') === false) {
                closeLeaderboard(null, true);
            }
        });

        // Application Logic
        async function handleLogin(e) {
            e.preventDefault();
            if (!navigator.onLine) {
                els.loginMsg.innerText = "No internet connection.";
                return;
            }

            const id = document.getElementById('login-id').value.trim();
            const zone = document.getElementById('login-zone').value.trim();
            
            // Input Validation
            if (!/^\d+$/.test(id) || !/^\d+$/.test(zone)) {
                els.loginMsg.innerText = "Invalid ID/Zone format.";
                return;
            }

            els.loginMsg.innerText = "Verifying Account...";
            document.getElementById('btn-login').disabled = true;

            try {
                // WARNING: Architecture flaw. Replace corsproxy.io with a dedicated Cloud Function
                const res = await fetch(`https://api.isan.eu.org/nickname/ml?id=${id}&zone=${zone}`);
                const data = await res.json();
                
                if (!data.success && !data.name && !data.nickname) {
                    throw new Error("Invalid ID or Zone");
                }
                
                currentUser.id = id;
                currentUser.ign = data.name || data.nickname;
                els.loginMsg.innerText = "Loading Score...";

                // Fetch Firebase profile
                const userDoc = await getDoc(doc(db, "players", id));
                currentUser.score = userDoc.exists() ? userDoc.data().score : 0;

                switchScreen(els.screenLogin, els.screenGame);
                els.playerIgn.innerText = currentUser.ign;
                els.playerScore.innerText = currentUser.score;
                
                nextHero();
            } catch(e) { 
                els.loginMsg.innerText = "Error: " + e.message; 
            } finally {
                document.getElementById('btn-login').disabled = false;
            }
        }

        function nextHero() {
            els.guessInput.value = "";
            els.guessInput.disabled = false;
            els.btnSubmit.disabled = false;
            els.feedback.innerText = "";
            els.debugMsg.classList.add('hidden');
            els.heroImg.style.display = 'block';
            els.timerBar.style.backgroundColor = "#4ade80"; 

            currentHero = heroes[Math.floor(Math.random() * heroes.length)];
            els.heroImg.src = currentHero.icon_path;
            
            // Auto-focus keyboard safely allowing native threads to catch up
            setTimeout(() => els.guessInput.focus(), 100);

            startTimer();
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            isGameActive = true;
            
            let timeLeft = MAX_TIME;
            els.timerText.innerText = `${timeLeft}s`;

            // Reset visual bar immediately (Force DOM Reflow)
            els.timerBar.style.transition = 'none';
            els.timerBar.style.transform = 'scaleX(1)';
            void els.timerBar.offsetWidth; 

            // Start native CSS hardware accelerated animation
            els.timerBar.style.transition = `transform ${MAX_TIME}s linear, background-color 0.3s`;
            els.timerBar.style.transform = 'scaleX(0)';

            timerInterval = setInterval(() => {
                timeLeft--;
                els.timerText.innerText = `${timeLeft}s`;

                if (timeLeft <= 5) els.timerBar.style.backgroundColor = "#ef4444"; 

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timeIsUp();
                }
            }, 1000);
        }

        function timeIsUp() {
            isGameActive = false;
            els.feedback.innerText = `Time's Up! It was ${currentHero.name}`;
            els.feedback.className = "text-center font-bold text-lg h-6 mb-2 text-red-400";
            lockGame(3000);
        }

        async function checkGuess(e) {
            e.preventDefault();
            if (!isGameActive) return;

            // Strict string normalization for input evaluation
            const guess = els.guessInput.value.toLowerCase().replace(/[^a-z0-9]/g, '');
            const answer = currentHero.name.toLowerCase().replace(/[^a-z0-9]/g, '');

            if (guess === answer) {
                clearInterval(timerInterval);
                isGameActive = false;
                els.timerBar.style.transition = 'none'; // Freeze timer visual
                
                els.feedback.innerText = "CORRECT!"; 
                els.feedback.className = "text-center font-bold text-lg h-6 mb-2 text-green-400";
                
                currentUser.score++;
                els.playerScore.innerText = currentUser.score;
                
                lockGame(1500);
                saveScore(); // Async fire-and-forget to avoid blocking main thread
            } else {
                els.guessInput.value = "";
                els.feedback.innerText = "WRONG! Try again."; 
                els.feedback.className = "text-center font-bold text-lg h-6 mb-2 text-red-500";
            }
        }

        function lockGame(timeoutDelay) {
            els.guessInput.disabled = true;
            els.btnSubmit.disabled = true;
            setTimeout(nextHero, timeoutDelay);
        }

        function saveScore() {
            if (!navigator.onLine) return; // Rely on Firebase offline persistence later if needed
            setDoc(doc(db, "players", currentUser.id), {
                ign: currentUser.ign,
                score: currentUser.score,
                updatedAt: new Date()
            }, { merge: true }).catch(console.error);
        }

        function handleImageError() {
            els.heroImg.style.display = 'none';
            els.debugMsg.innerText = `Image Missing: ${els.heroImg.getAttribute('src')}`;
            els.debugMsg.classList.remove('hidden');
        }

        // View Routing & State Management
        function switchScreen(hideEl, showEl) {
            hideEl.classList.add('hidden');
            hideEl.classList.remove('flex');
            showEl.classList.remove('hidden');
            showEl.classList.add('flex');
        }

        async function openLeaderboard(e) {
            if(e) e.preventDefault();
            history.pushState({ page: 'leaderboard' }, ''); // Pushes to history for Android Back button
            switchScreen(els.screenGame, els.screenLeaderboard);
            
            const tbody = document.getElementById('lb-body');
            tbody.innerHTML = '<tr class="w-full flex"><td class="text-center text-zinc-500 py-8 font-bold w-full">Loading Top 5...</td></tr>';

            try {
                const q = query(collection(db, "players"), orderBy("score", "desc"), limit(5));
                const querySnapshot = await getDocs(q);
                
                tbody.innerHTML = "";
                let rank = 1;
                querySnapshot.forEach((doc) => {
                    const p = doc.data();
                    // Basic XSS mitigation before injecting into DOM via innerHTML
                    const safeIgn = p.ign.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                    const color = rank === 1 ? "text-yellow-400" : rank === 2 ? "text-zinc-300" : rank === 3 ? "text-amber-500" : "text-white";
                    tbody.innerHTML += `<tr class="border-b border-zinc-800/50 w-full flex items-center px-2 py-1"><td class="py-4 font-black w-10 text-center ${color}">#${rank}</td><td class="py-4 font-bold text-zinc-100 truncate flex-1 px-2">${safeIgn}</td><td class="py-4 font-mono text-yellow-500 text-right w-16 font-black">${p.score}</td></tr>`;
                    rank++;
                });
            } catch(err) { 
                tbody.innerHTML = "<tr class='w-full flex'><td class='text-center text-red-500 py-8 font-bold w-full'>Error loading leaderboard.</td></tr>"; 
            }
        }

        function closeLeaderboard(e, fromPopState = false) {
            if(e) e.preventDefault();
            if (!fromPopState) history.back(); // Triggers OS-level back navigation
            switchScreen(els.screenLeaderboard, els.screenGame);
        }

        async function searchPlayer(e) {
            e.preventDefault();
            const searchId = document.getElementById('search-id').value.trim();
            if (!searchId) return;
            
            const resDiv = document.getElementById('search-result');
            document.getElementById('search-rank').innerText = "...";
            resDiv.classList.remove('hidden');
            resDiv.classList.add('flex');

            try {
                const q = query(collection(db, "players"), orderBy("score", "desc"));
                const querySnapshot = await getDocs(q);
                let rank = 1, found = false;
                
                for (const playerDoc of querySnapshot.docs) {
                    if (playerDoc.id === searchId) {
                        found = true;
                        const safeIgn = playerDoc.data().ign.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                        document.getElementById('search-rank').innerText = `#${rank}`;
                        document.getElementById('search-details').innerHTML = `${safeIgn} - <span class="text-yellow-400">${playerDoc.data().score} pts</span>`;
                        break;
                    }
                    rank++;
                }
                
                if (!found) {
                    document.getElementById('search-rank').innerText = "-";
                    document.getElementById('search-details').innerText = "Player not found";
                }
            } catch(err) {
                document.getElementById('search-rank').innerText = "!";
                document.getElementById('search-details').innerText = "Search Error";
            }
        }
    </script>
</body>
</html>